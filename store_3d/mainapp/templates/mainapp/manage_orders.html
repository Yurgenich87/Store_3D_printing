{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="section-title">
    <h2>{{ title }}</h2>
</div>

<div class="container text-center">
  <div class="row">
    <div class="col-6 col-md-4">
        <button type="submit" class="blue">Создать новый заказ</button>
    </div>
    <div class="col-6 col-md-4">
        <h3>Всего заказов: {{ orders|length }}</h3>
    </div>
    <div class="col-6 col-md-4">
        <input type="number" class="form-control custom-tooltip" data-bs-toggle="tooltip" data-bs-placement="top"
               placeholder="Введите количество дней" id="customDaysInput"
               data-bs-custom-class="custom-tooltip"
               data-bs-title="Отобрадится список заказов за введенное количество дней">
        <button type="button" class="blue" onclick="applyCustomDaysFilter('order')">Применить</button>
        <button type="button" class="red" onclick="resetFilter()">Сбросить</button>

    </div>
  </div>
</div>
<div class="container overflow-hidden text-center">
    <div class="row gy-5 border-bottom">
      <div class="col-6">
        <form action="{% url 'create_order' %}" method="post">
        {% csrf_token %}
        {{ order_form.as_p }}
      </form>
    </div>
  </div>

       <!-- Список заказов и кнопки для их редактирования и удаления -->
        <div class="container">
            <h3>Список заказов</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Пользователь</th>
                            <th>Наименование товара</th>
                            <th>Кол-во</th>
                            <th>Сумма</th>
                            <th>Дата</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in orders %}
                        <tr>
                            <td>{{ order.id }}</td>
                            <td>{{ order.user.username }}</td>
                            <td>{{ order.product.name }}</td>
                            <td>{{ order.quantity }}</td>
                            <td>{{ order.sum_orders }}</td>
                            <td>{{ order.at_data }}</td>
                            <td>
                                <form action="{% url 'update_order' order.id %}" method="post" class="action-form">
                                    {% csrf_token %}
                                    {{ order_form.as_p }}
                                    <button type="submit" class="blue">Редактировать</button>
                                </form>
                                <form action="{% url 'delete_order' order.id %}" method="post" class="action-form">
                                    {% csrf_token %}
                                    <button type="submit" class="red">Удалить</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

      </div>
    </div>
  </div>
</section>

{% endblock %}
